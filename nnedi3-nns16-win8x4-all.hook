// 
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Lesser General Public License for more details.
// 
// You should have received a copy of the GNU Lesser General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.

//!DESC NNEDI3 (step=step1, window=8x4, neurons=16)
//!HOOK LUMA
//!HOOK CHROMA
//!HOOK RGB
//!HOOK XYZ
//!BIND HOOKED
//!SAVE nnedi3_int01
//!WHEN HOOKED.w 2 * OUTPUT.w / 1.600000 < HOOKED.h 2 * OUTPUT.h / 1.600000 < *
#pragma optionNV(fastprecision on))
float nnedi3(vec4 samples[8]) {
float sum = 0.0, sumsq = 0.0;
for (int i = 0; i < 8; i++) {
    sum += dot(samples[i], vec4(1.0));
    sumsq += dot(samples[i], samples[i]);
}
float mstd0 = sum / 32.0;
float mstd1 = sumsq / 32.0 - mstd0 * mstd0;
float mstd2 = mix(0.0, inversesqrt(mstd1), mstd1 >= 1.192092896e-7);
mstd1 *= mstd2;
float vsum = 0.0, wsum = 0.0, sum1, sum2;
#define T(x) intBitsToFloat(x)
#define W(i,w0,w1,w2,w3) dot(samples[i],vec4(T(w0),T(w1),T(w2),T(w3)))
#define WS(w0,w1) sum1 = exp(sum1 * mstd2 + T(w0)); sum2 = sum2 * mstd2 + T(w1); wsum += sum1; vsum += sum1*(sum2/(1.0+abs(sum2)));
sum1=W(0,-1112248839,1024662558,-1118620174,-1123354974)+W(1,-1143613552,-1129268360,1028038478,1046299686)+W(2,-1087068557,1048182784,-1103968288,1016130204)+W(3,-1103342192,-1115088511,1047279381,1063313277)+W(4,1059583965,-1119323982,-1117908518,-1101453425)+W(5,1003350800,-1134684248,1034186247,-1088182320)+W(6,1027638054,-1137723992,-1122818124,-1122284590)+W(7,-1111377363,1028117438,978245507,-1124394588);sum2=W(0,-1131063526,-1131086728,-1136248556,-1162931039)+W(1,-1117642655,-1128864654,1031011705,1029801649)+W(2,-1128443230,1044675527,-1119907402,-1115594515)+W(3,-1107118398,-1113986381,1050674207,1042762789)+W(4,-1107588397,-1111169922,1017500018,1022791334)+W(5,-1186206458,1017255694,-1112569685,1009001220)+W(6,-1125594766,-1135599628,1014782692,-1156766128)+W(7,993928432,1007622876,-1114139175,-1148613464);WS(1038828992,1041685264);
sum1=W(0,1049950910,1027336960,995958527,-1114329248)+W(1,1028668144,1025858258,-1107326552,-1097681183)+W(2,1060640651,1045782072,1034401008,-1117673776)+W(3,1033402064,-1122828000,-1105157973,-1085831405)+W(4,-1098159517,-1106507532,1035088196,1038612842)+W(5,-1110558370,-1113173980,1032016120,1053136924)+W(6,-1124000392,-1105439902,1029875310,1008781376)+W(7,1012109856,-1114749520,1034119968,1023707152);sum2=W(0,-1099468189,-1140834082,-1131767489,1031315360)+W(1,1036663822,-1122285462,1024287080,-1112139926)+W(2,-1100127579,1052854494,-1107869385,1023637252)+W(3,1038018354,-1112496415,1052996200,-1117241706)+W(4,1034036134,1024451620,-1117110288,-1107666272)+W(5,-1110479054,-1112615559,1027157968,1027811452)+W(6,1003450083,1041131277,-1110538107,-1124350185)+W(7,998992195,-1106762474,1035032776,-1131082337);WS(-1086074680,1053637716);
sum1=W(0,1042002951,-1165378922,-1148805338,-1121345387)+W(1,-1121398619,991217235,-1115297518,-1113042450)+W(2,1052460699,-1094571489,1049266593,-1136570733)+W(3,-1117268427,1036113926,-1098765182,-1107443934)+W(4,-1124281856,1040734807,-1133439181,1027081787)+W(5,-1136658365,-1112513138,1006695533,1043313411)+W(6,-1121708851,1035650578,-1120818857,-1158465386)+W(7,1021173351,-1106476275,1027853163,1016359031);sum2=W(0,-1170492850,1003954710,1017334370,1026517575)+W(1,-1143472678,998846550,-1132363566,-1138816415)+W(2,-1096673587,-1077357700,1071692777,1051558711)+W(3,-1124275402,1018703670,-1098960792,-1136175651)+W(4,-1098179385,996694924,1020207734,1049822619)+W(5,1007812651,1007766851,1003290486,-1116986501)+W(6,-1122577241,1015494226,1019995718,1022251878)+W(7,1009415395,-1163222937,-1126828734,-1141894102);WS(1051521136,1027207116);
sum1=W(0,1010830545,-1124202632,-1121133108,-1122694020)+W(1,1018062184,-1116091286,1037913146,-1124291704)+W(2,1057246783,1026322980,-1116351908,-1102175837)+W(3,1041281977,-1125394504,982577970,-1093542759)+W(4,-1089509425,1025178484,1009393969,1045518980)+W(5,1008755233,-1127575032,-1118947636,1055793637)+W(6,-1117338572,1009646833,1015772516,1008379217)+W(7,1015898776,-1121163492,1001810977,1001093793);sum2=W(0,-1135527491,-1123650952,1013616911,-1137495011)+W(1,-1118108263,-1128775579,1024465134,1027730022)+W(2,1013443151,-1114797945,1029346938,-1135578111)+W(3,-1098008683,-1080443718,1068130737,1049128967)+W(4,-1122100892,-1128721387,1012413655,1017473747)+W(5,-1101482344,-1137148015,-1143058109,1046423571)+W(6,-1166794345,-1156685818,1008139351,-1133405571)+W(7,-1128178767,991435034,-1126785325,1020545683);WS(1057767608,-1132080751);
sum1=W(0,1025766741,-1135552917,1026017621,1026028453)+W(1,1012106581,-1138611630,1040474693,1035118319)+W(2,1051769667,-1083959172,1048679017,-1117947285)+W(3,1030333189,1045191121,-1084413328,-1111744027)+W(4,-1120826122,1045191525,1011196341,1025261389)+W(5,-1122181545,1030480605,-1110336171,1049618505)+W(6,1028389741,1039505775,1025013027,1015828970)+W(7,1027514349,1020294666,-1123719333,1028257397);sum2=W(0,-1101123140,-1103020887,1028118553,1017587161)+W(1,988296658,1010063898,1022642341,1040188371)+W(2,-1099714612,1049070164,1005112948,1008167722)+W(3,1026403646,1033545355,1046164698,1039093756)+W(4,1032013714,1022049457,1015776789,-1125344655)+W(5,1002132020,1037334715,-1098832696,-1111525569)+W(6,1009340114,-1167693540,-1138850406,-1148301500)+W(7,-1139728254,1035581889,-1103378287,-1115917000);WS(-1099372256,-1088618788);
sum1=W(0,1048693927,1033711782,-1113349022,-1112538182)+W(1,-1109099742,-1110127398,-1129092599,-1112344546)+W(2,1064716592,-1143605597,1024020908,-1103996671)+W(3,1032699126,-1121424940,1044926535,-1086749016)+W(4,-1085173359,1004694493,-1111225386,1046614908)+W(5,-1130166943,-1106709441,1040479887,1062252083)+W(6,-1108087402,-1138402062,-1114146165,-1110537326)+W(7,-1120726228,-1106064827,1042110371,1034104622);sum2=W(0,1013472954,-1131186779,-1144106823,987083788)+W(1,979955865,-1163904780,-1122269098,-1120418118)+W(2,-1139561796,1044091298,-1121977305,-1120467381)+W(3,-1115615181,-1127292875,1042996066,1038342084)+W(4,1038343490,-1115306287,-1162389292,-1118651341)+W(5,-1123141745,1014320394,-1128689408,-1118476220)+W(6,-1155962630,-1117365756,964510307,-1152635694)+W(7,-1135582470,1008840046,-1141833923,-1132569906);WS(1041282784,1044242623);
sum1=W(0,-1171512555,-1121861252,-1119816052,-1119885764)+W(1,1025494836,-1113504879,1040963149,1003864029)+W(2,1057266723,1010135439,-1113812594,-1100880653)+W(3,1043843337,-1125989575,-1118004569,-1094412795)+W(4,-1089952515,1031135156,1015358999,1046531310)+W(5,-1156936827,-1122714492,-1114099002,1056310444)+W(6,-1115226950,1003139037,1021011107,1005085853)+W(7,1003362397,-1120612644,992693307,1015234855);sum2=W(0,-1142619324,1012902153,-1143827754,1005317381)+W(1,1026462555,1020893616,-1128784654,-1126266146)+W(2,-1114788024,-1098688460,1009279342,1019060164)+W(3,1054132458,1070492026,-1078812823,-1094218173)+W(4,-1120377499,1017453102,-1131000233,1014092605)+W(5,1048935725,1011358224,1007638067,-1099532818)+W(6,-1139793504,-1147729078,-1137528453,1012779564)+W(7,1015734963,987943782,1018177647,-1130333980);WS(1046635232,1024078131);
sum1=W(0,1035063871,1034039879,1025138813,1002735212)+W(1,1040314319,1035664624,-1105608655,-1097977761)+W(2,1044122447,-1110416695,-1132524982,1017042555)+W(3,1038536855,-1114843703,1051547730,-1094991056)+W(4,-1092481954,-1094320024,1033606155,1031803657)+W(5,1003107468,1019470987,1047410847,1050188814)+W(6,-1107502027,-1103391009,1015508823,1021596219)+W(7,1021345835,-1136683190,1046101811,1031346589);sum2=W(0,1044036812,-1112231286,-1112281069,-1096475926)+W(1,-1106234474,-1121785528,1024115789,1052862983)+W(2,-1111398905,-1096068583,1041647377,-1116645717)+W(3,-1130292776,1037359643,1038036111,1051331710)+W(4,1026411348,-1114320784,1023473494,-1113263240)+W(5,-1111704128,-1123406807,1028002558,1042458641)+W(6,-1138574198,-1104710548,1039764966,-1117017643)+W(7,-1109714921,1041123403,-1106844581,1037890580);WS(-1088554040,-1076674880);
sum1=W(0,-1132973070,1034501898,1016736263,1026292820)+W(1,-1130131975,1028857234,-1110973538,-1144171612)+W(2,-1089525132,1037427962,-1110236986,1042339025)+W(3,-1108906970,-1112145786,-1123890785,1052671191)+W(4,1056478885,-1118983748,1016313655,-1103961368)+W(5,1002874044,1025897228,1041641985,-1092344862)+W(6,1038469390,-1123320716,1014755782,-1151588920)+W(7,-1130905399,1033705562,1017396903,1010979982);sum2=W(0,-1133182691,1024414743,1007730851,1013915195)+W(1,1020584890,1005058566,-1121307593,-1127318198)+W(2,-1111248658,1040952978,1028189234,981970521)+W(3,-1124411850,1029625115,1057294107,1035588225)+W(4,-1109339192,-1094377458,-1142484934,-1121038101)+W(5,1026110889,1023925523,1024397525,-1107404728)+W(6,-1116592821,-1112421528,1010322539,-1146368902)+W(7,-1140327971,-1199698720,1019759378,-1118541421);WS(1063581112,1015292283);
sum1=W(0,-1125096044,1037634467,-1124445804,-1123806598)+W(1,-1117498166,1006823135,1028314614,1046804719)+W(2,-1083793455,-1098422117,-1112186771,1036776315)+W(3,-1106689849,1004978479,1034155462,1064148787)+W(4,1058965073,-1106625757,-1117642958,-1102837698)+W(5,1033810693,1029436414,1037373467,-1089226130)+W(6,1036181095,-1127761788,1010580432,-1137018200)+W(7,-1119765454,1034713459,1021285644,994321759);sum2=W(0,-1110373665,-1122115974,-1129458054,-1127012521)+W(1,1021812843,1015201109,-1121551577,-1121983257)+W(2,-1118435057,1041258512,-1113739078,-1134632819)+W(3,1039413537,-1127386873,1043546644,-1107711610)+W(4,1025961773,1041055451,-1115241196,-1106078947)+W(5,-1110385416,-1135801459,-1131486243,1048226293)+W(6,1025056413,1029845331,-1119046895,-1122814807)+W(7,-1132245806,-1140149017,1018415015,-1139476701);WS(-1109010880,-1087548956);
sum1=W(0,-1095012676,-1102610188,1034343312,1034947768)+W(1,1029737824,1025692706,1039446704,1046023882)+W(2,-1096454908,-1091443170,1019661856,1016751552)+W(3,1038373096,1039271048,-1105694067,1042564604)+W(4,-1131030249,1042942296,1017025648,-1126501287)+W(5,1012879825,1041317114,-1103700296,1044246468)+W(6,1019936112,1024647464,-1140792121,1030724160)+W(7,1029263800,1041193844,-1107855416,-1141422594);sum2=W(0,-1107522705,-1121503695,-1113997103,1034034732)+W(1,1021740679,-1112744336,1038975878,-1105460279)+W(2,-1114143244,-1105773446,1025456143,1028771217)+W(3,-1121564954,1024971971,1059420344,1032873918)+W(4,-1109746606,-1106040358,-1102403849,1035315492)+W(5,-1122379806,-1106873869,1046039582,1040681265)+W(6,-1106459627,1039219872,-1099438501,1018212015)+W(7,-1130313815,-1105420350,1046943722,1026290649);WS(-1086299832,-1077288694);
sum1=W(0,-1099039878,-1108540692,-1132921948,1021716686)+W(1,1039618828,-1131678690,1021468846,-1111509136)+W(2,-1158126306,1055092577,-1108835908,-1113901292)+W(3,1041516082,-1118733319,1062013047,-1096197083)+W(4,-1089051407,-1113759276,965138311,1023078294)+W(5,-1122936235,1015065790,1022391342,1050708993)+W(6,-1107695832,-1113503632,-1130194922,998651320)+W(7,997649137,1023538631,991635057,-1133490396);sum2=W(0,1035891239,1030599513,1027343155,-1133976495)+W(1,-1113698362,1016406968,-1108453664,-1130801609)+W(2,1037590422,1054189655,-1119506980,-1149877867)+W(3,-1108226898,-1120928356,-1119322812,1012747883)+W(4,1041308688,-1112736561,1016526837,-1126385541)+W(5,1016225738,988482485,-1119223720,-1107379808)+W(6,1004824957,-1120347934,-1140785051,994153115)+W(7,1018050885,-1117792638,-1129452107,-1116360142);WS(-1113279936,1066223903);
sum1=W(0,1040261344,-1140107833,-1141738481,-1128171420)+W(1,-1123695998,-1154978689,-1116929726,-1112013315)+W(2,1050703688,-1100167260,1044160156,-1138940153)+W(3,-1123177006,1034288823,-1100730273,-1108200895)+W(4,-1130335589,1035637471,-1129655596,1020686276)+W(5,-1141423761,-1114187043,1024316286,1040782300)+W(6,-1124525100,1032644739,-1123239900,964173357)+W(7,1013984857,-1108229911,1029624526,1014134393);sum2=W(0,1021458196,1017345212,-1125272644,-1115606620)+W(1,-1131253088,-1143902384,1016051020,1009639320)+W(2,1047257730,1068148121,-1080575150,-1099614716)+W(3,1020803060,1032085971,-1113655261,-1120838650)+W(4,1044966894,1026244022,-1122847678,-1102155153)+W(5,1016311348,-1137376840,-1130782536,-1132238288)+W(6,1017049220,1010161976,-1129056732,-1123394906)+W(7,-1137115752,-1136984808,1004223696,967940860);WS(1060545080,-1126581603);
sum1=W(0,-1112268976,-1128752350,1037657648,1032630360)+W(1,-1125010622,1029508223,1032285712,1045186906)+W(2,-1090205186,1048595306,1037448680,1043836232)+W(3,-1108078856,1041691860,-1094666759,1053340438)+W(4,1057651571,1035187792,1031833596,976149203)+W(5,1042698525,1040118132,-1092127852,-1082657749)+W(6,1034806588,1043419290,1025282125,1031675647)+W(7,1033087420,1034587656,-1096441814,-1104761760);sum2=W(0,1034075649,1026991402,-1126365381,-1123698886)+W(1,-1113635181,-1168196508,-1118780236,998149095)+W(2,1019253181,1047572688,-1121651762,-1135914762)+W(3,-1114469118,-1145545780,1038479879,1023543366)+W(4,1035108181,-1115886918,-1122087574,-1118625490)+W(5,992781287,-1139655050,1011684618,-1114677625)+W(6,1016718341,-1117034488,-1134045690,-1147908244)+W(7,-1142844852,1007905050,-1137057610,-1132109957);WS(-1083899832,-1105526146);
sum1=W(0,-1119744955,-1125720471,-1139718894,1026357515)+W(1,-1111407198,-1152407445,-1106102943,-1117075907)+W(2,-1092285679,1062437883,-1105573131,1044187583)+W(3,-1107209883,-1107292779,1052836221,1048719011)+W(4,1058460257,1022150135,-1119529939,-1104526300)+W(5,-1122559055,-1119739267,-1123085499,-1089717563)+W(6,1033366698,1009731342,-1132776678,-1125768375)+W(7,-1119196243,-1129505495,-1112611206,-1114009838);sum2=W(0,1025172792,-1117035240,-1129400032,-1110807022)+W(1,-1123816828,-1144812946,999654946,1033543849)+W(2,1035443403,-1135427545,-1123619892,-1105612607)+W(3,-1120747576,-1113498942,1053020794,1039345667)+W(4,-1111010692,-1115955576,1016529300,-1131262448)+W(5,-1113301822,-1146605522,-1135856481,1047843748)+W(6,-1117326476,-1121250556,-1136239801,-1129444600)+W(7,-1119691028,-1135792457,998047364,1022819536);WS(-1107513792,1064663354);
sum1=W(0,-1113532308,1021510766,-1161118946,1030862455)+W(1,-1123071015,1009770420,-1127591630,1032378968)+W(2,-1091621085,1046262406,-1104300038,1040244826)+W(3,-1107582956,-1108820108,1034822530,1051734861)+W(4,1054782000,1019068110,-1135077628,-1102940181)+W(5,-1125175670,1025488559,1031948820,-1095483267)+W(6,1036941280,-1128724830,1011863892,-1135539484)+W(7,-1126076542,1036426604,-1120336759,-1172984259);sum2=W(0,-1140752647,-1123380440,-1139065871,-1135206239)+W(1,974924014,-1133276463,1021581075,1022777359)+W(2,988696695,-1092786651,1025917606,1026230428)+W(3,1029689087,-1140169471,-1085937537,-1122295168)+W(4,1049996339,1057784826,1013849783,1027050280)+W(5,-1135329695,-1124883951,-1130048007,1032573953)+W(6,1033822297,1034470972,-1127829351,1016077019)+W(7,1011238415,1001568686,-1137094527,1032545188);WS(1058918200,-1121082995);
return clamp(mstd0 + 5.0 * vsum / wsum * mstd1, 0.0, 1.0);
}  // nnedi3
vec4 hook() {
vec4 ret = vec4(0.0);
vec4 samples[8];
samples[0][0] = HOOKED_texOff(vec2(-3.0, 0.0))[0];
samples[0][1] = HOOKED_texOff(vec2(-2.0, 0.0))[0];
samples[0][2] = HOOKED_texOff(vec2(-2.0, -1.0))[0];
samples[0][3] = HOOKED_texOff(vec2(-3.0, -1.0))[0];
samples[1][0] = HOOKED_texOff(vec2(-3.0, 2.0))[0];
samples[1][1] = HOOKED_texOff(vec2(-2.0, 2.0))[0];
samples[1][2] = HOOKED_texOff(vec2(-2.0, 1.0))[0];
samples[1][3] = HOOKED_texOff(vec2(-3.0, 1.0))[0];
samples[2][0] = HOOKED_texOff(vec2(-1.0, 0.0))[0];
samples[2][1] = HOOKED_texOff(vec2(0.0, 0.0))[0];
samples[2][2] = HOOKED_texOff(vec2(0.0, -1.0))[0];
samples[2][3] = HOOKED_texOff(vec2(-1.0, -1.0))[0];
samples[3][0] = HOOKED_texOff(vec2(-1.0, 2.0))[0];
samples[3][1] = HOOKED_texOff(vec2(0.0, 2.0))[0];
samples[3][2] = HOOKED_texOff(vec2(0.0, 1.0))[0];
samples[3][3] = HOOKED_texOff(vec2(-1.0, 1.0))[0];
samples[4][0] = HOOKED_texOff(vec2(1.0, 0.0))[0];
samples[4][1] = HOOKED_texOff(vec2(2.0, 0.0))[0];
samples[4][2] = HOOKED_texOff(vec2(2.0, -1.0))[0];
samples[4][3] = HOOKED_texOff(vec2(1.0, -1.0))[0];
samples[5][0] = HOOKED_texOff(vec2(1.0, 2.0))[0];
samples[5][1] = HOOKED_texOff(vec2(2.0, 2.0))[0];
samples[5][2] = HOOKED_texOff(vec2(2.0, 1.0))[0];
samples[5][3] = HOOKED_texOff(vec2(1.0, 1.0))[0];
samples[6][0] = HOOKED_texOff(vec2(3.0, 0.0))[0];
samples[6][1] = HOOKED_texOff(vec2(4.0, 0.0))[0];
samples[6][2] = HOOKED_texOff(vec2(4.0, -1.0))[0];
samples[6][3] = HOOKED_texOff(vec2(3.0, -1.0))[0];
samples[7][0] = HOOKED_texOff(vec2(3.0, 2.0))[0];
samples[7][1] = HOOKED_texOff(vec2(4.0, 2.0))[0];
samples[7][2] = HOOKED_texOff(vec2(4.0, 1.0))[0];
samples[7][3] = HOOKED_texOff(vec2(3.0, 1.0))[0];
ret[0] = nnedi3(samples);
samples[0][0] = HOOKED_texOff(vec2(-3.0, 0.0))[1];
samples[0][1] = HOOKED_texOff(vec2(-2.0, 0.0))[1];
samples[0][2] = HOOKED_texOff(vec2(-2.0, -1.0))[1];
samples[0][3] = HOOKED_texOff(vec2(-3.0, -1.0))[1];
samples[1][0] = HOOKED_texOff(vec2(-3.0, 2.0))[1];
samples[1][1] = HOOKED_texOff(vec2(-2.0, 2.0))[1];
samples[1][2] = HOOKED_texOff(vec2(-2.0, 1.0))[1];
samples[1][3] = HOOKED_texOff(vec2(-3.0, 1.0))[1];
samples[2][0] = HOOKED_texOff(vec2(-1.0, 0.0))[1];
samples[2][1] = HOOKED_texOff(vec2(0.0, 0.0))[1];
samples[2][2] = HOOKED_texOff(vec2(0.0, -1.0))[1];
samples[2][3] = HOOKED_texOff(vec2(-1.0, -1.0))[1];
samples[3][0] = HOOKED_texOff(vec2(-1.0, 2.0))[1];
samples[3][1] = HOOKED_texOff(vec2(0.0, 2.0))[1];
samples[3][2] = HOOKED_texOff(vec2(0.0, 1.0))[1];
samples[3][3] = HOOKED_texOff(vec2(-1.0, 1.0))[1];
samples[4][0] = HOOKED_texOff(vec2(1.0, 0.0))[1];
samples[4][1] = HOOKED_texOff(vec2(2.0, 0.0))[1];
samples[4][2] = HOOKED_texOff(vec2(2.0, -1.0))[1];
samples[4][3] = HOOKED_texOff(vec2(1.0, -1.0))[1];
samples[5][0] = HOOKED_texOff(vec2(1.0, 2.0))[1];
samples[5][1] = HOOKED_texOff(vec2(2.0, 2.0))[1];
samples[5][2] = HOOKED_texOff(vec2(2.0, 1.0))[1];
samples[5][3] = HOOKED_texOff(vec2(1.0, 1.0))[1];
samples[6][0] = HOOKED_texOff(vec2(3.0, 0.0))[1];
samples[6][1] = HOOKED_texOff(vec2(4.0, 0.0))[1];
samples[6][2] = HOOKED_texOff(vec2(4.0, -1.0))[1];
samples[6][3] = HOOKED_texOff(vec2(3.0, -1.0))[1];
samples[7][0] = HOOKED_texOff(vec2(3.0, 2.0))[1];
samples[7][1] = HOOKED_texOff(vec2(4.0, 2.0))[1];
samples[7][2] = HOOKED_texOff(vec2(4.0, 1.0))[1];
samples[7][3] = HOOKED_texOff(vec2(3.0, 1.0))[1];
ret[1] = nnedi3(samples);
samples[0][0] = HOOKED_texOff(vec2(-3.0, 0.0))[2];
samples[0][1] = HOOKED_texOff(vec2(-2.0, 0.0))[2];
samples[0][2] = HOOKED_texOff(vec2(-2.0, -1.0))[2];
samples[0][3] = HOOKED_texOff(vec2(-3.0, -1.0))[2];
samples[1][0] = HOOKED_texOff(vec2(-3.0, 2.0))[2];
samples[1][1] = HOOKED_texOff(vec2(-2.0, 2.0))[2];
samples[1][2] = HOOKED_texOff(vec2(-2.0, 1.0))[2];
samples[1][3] = HOOKED_texOff(vec2(-3.0, 1.0))[2];
samples[2][0] = HOOKED_texOff(vec2(-1.0, 0.0))[2];
samples[2][1] = HOOKED_texOff(vec2(0.0, 0.0))[2];
samples[2][2] = HOOKED_texOff(vec2(0.0, -1.0))[2];
samples[2][3] = HOOKED_texOff(vec2(-1.0, -1.0))[2];
samples[3][0] = HOOKED_texOff(vec2(-1.0, 2.0))[2];
samples[3][1] = HOOKED_texOff(vec2(0.0, 2.0))[2];
samples[3][2] = HOOKED_texOff(vec2(0.0, 1.0))[2];
samples[3][3] = HOOKED_texOff(vec2(-1.0, 1.0))[2];
samples[4][0] = HOOKED_texOff(vec2(1.0, 0.0))[2];
samples[4][1] = HOOKED_texOff(vec2(2.0, 0.0))[2];
samples[4][2] = HOOKED_texOff(vec2(2.0, -1.0))[2];
samples[4][3] = HOOKED_texOff(vec2(1.0, -1.0))[2];
samples[5][0] = HOOKED_texOff(vec2(1.0, 2.0))[2];
samples[5][1] = HOOKED_texOff(vec2(2.0, 2.0))[2];
samples[5][2] = HOOKED_texOff(vec2(2.0, 1.0))[2];
samples[5][3] = HOOKED_texOff(vec2(1.0, 1.0))[2];
samples[6][0] = HOOKED_texOff(vec2(3.0, 0.0))[2];
samples[6][1] = HOOKED_texOff(vec2(4.0, 0.0))[2];
samples[6][2] = HOOKED_texOff(vec2(4.0, -1.0))[2];
samples[6][3] = HOOKED_texOff(vec2(3.0, -1.0))[2];
samples[7][0] = HOOKED_texOff(vec2(3.0, 2.0))[2];
samples[7][1] = HOOKED_texOff(vec2(4.0, 2.0))[2];
samples[7][2] = HOOKED_texOff(vec2(4.0, 1.0))[2];
samples[7][3] = HOOKED_texOff(vec2(3.0, 1.0))[2];
ret[2] = nnedi3(samples);
samples[0][0] = HOOKED_texOff(vec2(-3.0, 0.0))[3];
samples[0][1] = HOOKED_texOff(vec2(-2.0, 0.0))[3];
samples[0][2] = HOOKED_texOff(vec2(-2.0, -1.0))[3];
samples[0][3] = HOOKED_texOff(vec2(-3.0, -1.0))[3];
samples[1][0] = HOOKED_texOff(vec2(-3.0, 2.0))[3];
samples[1][1] = HOOKED_texOff(vec2(-2.0, 2.0))[3];
samples[1][2] = HOOKED_texOff(vec2(-2.0, 1.0))[3];
samples[1][3] = HOOKED_texOff(vec2(-3.0, 1.0))[3];
samples[2][0] = HOOKED_texOff(vec2(-1.0, 0.0))[3];
samples[2][1] = HOOKED_texOff(vec2(0.0, 0.0))[3];
samples[2][2] = HOOKED_texOff(vec2(0.0, -1.0))[3];
samples[2][3] = HOOKED_texOff(vec2(-1.0, -1.0))[3];
samples[3][0] = HOOKED_texOff(vec2(-1.0, 2.0))[3];
samples[3][1] = HOOKED_texOff(vec2(0.0, 2.0))[3];
samples[3][2] = HOOKED_texOff(vec2(0.0, 1.0))[3];
samples[3][3] = HOOKED_texOff(vec2(-1.0, 1.0))[3];
samples[4][0] = HOOKED_texOff(vec2(1.0, 0.0))[3];
samples[4][1] = HOOKED_texOff(vec2(2.0, 0.0))[3];
samples[4][2] = HOOKED_texOff(vec2(2.0, -1.0))[3];
samples[4][3] = HOOKED_texOff(vec2(1.0, -1.0))[3];
samples[5][0] = HOOKED_texOff(vec2(1.0, 2.0))[3];
samples[5][1] = HOOKED_texOff(vec2(2.0, 2.0))[3];
samples[5][2] = HOOKED_texOff(vec2(2.0, 1.0))[3];
samples[5][3] = HOOKED_texOff(vec2(1.0, 1.0))[3];
samples[6][0] = HOOKED_texOff(vec2(3.0, 0.0))[3];
samples[6][1] = HOOKED_texOff(vec2(4.0, 0.0))[3];
samples[6][2] = HOOKED_texOff(vec2(4.0, -1.0))[3];
samples[6][3] = HOOKED_texOff(vec2(3.0, -1.0))[3];
samples[7][0] = HOOKED_texOff(vec2(3.0, 2.0))[3];
samples[7][1] = HOOKED_texOff(vec2(4.0, 2.0))[3];
samples[7][2] = HOOKED_texOff(vec2(4.0, 1.0))[3];
samples[7][3] = HOOKED_texOff(vec2(3.0, 1.0))[3];
ret[3] = nnedi3(samples);
return ret;
}  // hook
//!DESC NNEDI3 (step=step2, window=8x4, neurons=16)
//!HOOK LUMA
//!HOOK CHROMA
//!HOOK RGB
//!HOOK XYZ
//!BIND HOOKED
//!BIND nnedi3_int01
//!SAVE nnedi3_int10
//!WHEN HOOKED.w 2 * OUTPUT.w / 1.600000 < HOOKED.h 2 * OUTPUT.h / 1.600000 < *
#pragma optionNV(fastprecision on))
float nnedi3(vec4 samples[8]) {
float sum = 0.0, sumsq = 0.0;
for (int i = 0; i < 8; i++) {
    sum += dot(samples[i], vec4(1.0));
    sumsq += dot(samples[i], samples[i]);
}
float mstd0 = sum / 32.0;
float mstd1 = sumsq / 32.0 - mstd0 * mstd0;
float mstd2 = mix(0.0, inversesqrt(mstd1), mstd1 >= 1.192092896e-7);
mstd1 *= mstd2;
float vsum = 0.0, wsum = 0.0, sum1, sum2;
#define T(x) intBitsToFloat(x)
#define W(i,w0,w1,w2,w3) dot(samples[i],vec4(T(w0),T(w1),T(w2),T(w3)))
#define WS(w0,w1) sum1 = exp(sum1 * mstd2 + T(w0)); sum2 = sum2 * mstd2 + T(w1); wsum += sum1; vsum += sum1*(sum2/(1.0+abs(sum2)));
sum1=W(0,-1103968288,1048182784,1024662558,-1118620174)+W(1,-1122818124,-1137723992,-1119323982,-1117908518)+W(2,1047279381,-1115088511,-1129268360,1028038478)+W(3,978245507,1028117438,-1134684248,1034186247)+W(4,1016130204,-1087068557,-1112248839,-1123354974)+W(5,-1122284590,1027638054,1059583965,-1101453425)+W(6,1063313277,-1103342192,-1143613552,1046299686)+W(7,-1124394588,-1111377363,1003350800,-1088182320);sum2=W(0,-1119907402,1044675527,-1131086728,-1136248556)+W(1,1014782692,-1135599628,-1111169922,1017500018)+W(2,1050674207,-1113986381,-1128864654,1031011705)+W(3,-1114139175,1007622876,1017255694,-1112569685)+W(4,-1115594515,-1128443230,-1131063526,-1162931039)+W(5,-1156766128,-1125594766,-1107588397,1022791334)+W(6,1042762789,-1107118398,-1117642655,1029801649)+W(7,-1148613464,993928432,-1186206458,1009001220);WS(1038828992,1041685264);
sum1=W(0,1034401008,1045782072,1027336960,995958527)+W(1,1029875310,-1105439902,-1106507532,1035088196)+W(2,-1105157973,-1122828000,1025858258,-1107326552)+W(3,1034119968,-1114749520,-1113173980,1032016120)+W(4,-1117673776,1060640651,1049950910,-1114329248)+W(5,1008781376,-1124000392,-1098159517,1038612842)+W(6,-1085831405,1033402064,1028668144,-1097681183)+W(7,1023707152,1012109856,-1110558370,1053136924);sum2=W(0,-1107869385,1052854494,-1140834082,-1131767489)+W(1,-1110538107,1041131277,1024451620,-1117110288)+W(2,1052996200,-1112496415,-1122285462,1024287080)+W(3,1035032776,-1106762474,-1112615559,1027157968)+W(4,1023637252,-1100127579,-1099468189,1031315360)+W(5,-1124350185,1003450083,1034036134,-1107666272)+W(6,-1117241706,1038018354,1036663822,-1112139926)+W(7,-1131082337,998992195,-1110479054,1027811452);WS(-1086074680,1053637716);
sum1=W(0,1049266593,-1094571489,-1165378922,-1148805338)+W(1,-1120818857,1035650578,1040734807,-1133439181)+W(2,-1098765182,1036113926,991217235,-1115297518)+W(3,1027853163,-1106476275,-1112513138,1006695533)+W(4,-1136570733,1052460699,1042002951,-1121345387)+W(5,-1158465386,-1121708851,-1124281856,1027081787)+W(6,-1107443934,-1117268427,-1121398619,-1113042450)+W(7,1016359031,1021173351,-1136658365,1043313411);sum2=W(0,1071692777,-1077357700,1003954710,1017334370)+W(1,1019995718,1015494226,996694924,1020207734)+W(2,-1098960792,1018703670,998846550,-1132363566)+W(3,-1126828734,-1163222937,1007766851,1003290486)+W(4,1051558711,-1096673587,-1170492850,1026517575)+W(5,1022251878,-1122577241,-1098179385,1049822619)+W(6,-1136175651,-1124275402,-1143472678,-1138816415)+W(7,-1141894102,1009415395,1007812651,-1116986501);WS(1051521136,1027207116);
sum1=W(0,-1116351908,1026322980,-1124202632,-1121133108)+W(1,1015772516,1009646833,1025178484,1009393969)+W(2,982577970,-1125394504,-1116091286,1037913146)+W(3,1001810977,-1121163492,-1127575032,-1118947636)+W(4,-1102175837,1057246783,1010830545,-1122694020)+W(5,1008379217,-1117338572,-1089509425,1045518980)+W(6,-1093542759,1041281977,1018062184,-1124291704)+W(7,1001093793,1015898776,1008755233,1055793637);sum2=W(0,1029346938,-1114797945,-1123650952,1013616911)+W(1,1008139351,-1156685818,-1128721387,1012413655)+W(2,1068130737,-1080443718,-1128775579,1024465134)+W(3,-1126785325,991435034,-1137148015,-1143058109)+W(4,-1135578111,1013443151,-1135527491,-1137495011)+W(5,-1133405571,-1166794345,-1122100892,1017473747)+W(6,1049128967,-1098008683,-1118108263,1027730022)+W(7,1020545683,-1128178767,-1101482344,1046423571);WS(1057767608,-1132080751);
sum1=W(0,1048679017,-1083959172,-1135552917,1026017621)+W(1,1025013027,1039505775,1045191525,1011196341)+W(2,-1084413328,1045191121,-1138611630,1040474693)+W(3,-1123719333,1020294666,1030480605,-1110336171)+W(4,-1117947285,1051769667,1025766741,1026028453)+W(5,1015828970,1028389741,-1120826122,1025261389)+W(6,-1111744027,1030333189,1012106581,1035118319)+W(7,1028257397,1027514349,-1122181545,1049618505);sum2=W(0,1005112948,1049070164,-1103020887,1028118553)+W(1,-1138850406,-1167693540,1022049457,1015776789)+W(2,1046164698,1033545355,1010063898,1022642341)+W(3,-1103378287,1035581889,1037334715,-1098832696)+W(4,1008167722,-1099714612,-1101123140,1017587161)+W(5,-1148301500,1009340114,1032013714,-1125344655)+W(6,1039093756,1026403646,988296658,1040188371)+W(7,-1115917000,-1139728254,1002132020,-1111525569);WS(-1099372256,-1088618788);
sum1=W(0,1024020908,-1143605597,1033711782,-1113349022)+W(1,-1114146165,-1138402062,1004694493,-1111225386)+W(2,1044926535,-1121424940,-1110127398,-1129092599)+W(3,1042110371,-1106064827,-1106709441,1040479887)+W(4,-1103996671,1064716592,1048693927,-1112538182)+W(5,-1110537326,-1108087402,-1085173359,1046614908)+W(6,-1086749016,1032699126,-1109099742,-1112344546)+W(7,1034104622,-1120726228,-1130166943,1062252083);sum2=W(0,-1121977305,1044091298,-1131186779,-1144106823)+W(1,964510307,-1117365756,-1115306287,-1162389292)+W(2,1042996066,-1127292875,-1163904780,-1122269098)+W(3,-1141833923,1008840046,1014320394,-1128689408)+W(4,-1120467381,-1139561796,1013472954,987083788)+W(5,-1152635694,-1155962630,1038343490,-1118651341)+W(6,1038342084,-1115615181,979955865,-1120418118)+W(7,-1132569906,-1135582470,-1123141745,-1118476220);WS(1041282784,1044242623);
sum1=W(0,-1113812594,1010135439,-1121861252,-1119816052)+W(1,1021011107,1003139037,1031135156,1015358999)+W(2,-1118004569,-1125989575,-1113504879,1040963149)+W(3,992693307,-1120612644,-1122714492,-1114099002)+W(4,-1100880653,1057266723,-1171512555,-1119885764)+W(5,1005085853,-1115226950,-1089952515,1046531310)+W(6,-1094412795,1043843337,1025494836,1003864029)+W(7,1015234855,1003362397,-1156936827,1056310444);sum2=W(0,1009279342,-1098688460,1012902153,-1143827754)+W(1,-1137528453,-1147729078,1017453102,-1131000233)+W(2,-1078812823,1070492026,1020893616,-1128784654)+W(3,1018177647,987943782,1011358224,1007638067)+W(4,1019060164,-1114788024,-1142619324,1005317381)+W(5,1012779564,-1139793504,-1120377499,1014092605)+W(6,-1094218173,1054132458,1026462555,-1126266146)+W(7,-1130333980,1015734963,1048935725,-1099532818);WS(1046635232,1024078131);
sum1=W(0,-1132524982,-1110416695,1034039879,1025138813)+W(1,1015508823,-1103391009,-1094320024,1033606155)+W(2,1051547730,-1114843703,1035664624,-1105608655)+W(3,1046101811,-1136683190,1019470987,1047410847)+W(4,1017042555,1044122447,1035063871,1002735212)+W(5,1021596219,-1107502027,-1092481954,1031803657)+W(6,-1094991056,1038536855,1040314319,-1097977761)+W(7,1031346589,1021345835,1003107468,1050188814);sum2=W(0,1041647377,-1096068583,-1112231286,-1112281069)+W(1,1039764966,-1104710548,-1114320784,1023473494)+W(2,1038036111,1037359643,-1121785528,1024115789)+W(3,-1106844581,1041123403,-1123406807,1028002558)+W(4,-1116645717,-1111398905,1044036812,-1096475926)+W(5,-1117017643,-1138574198,1026411348,-1113263240)+W(6,1051331710,-1130292776,-1106234474,1052862983)+W(7,1037890580,-1109714921,-1111704128,1042458641);WS(-1088554040,-1076674880);
sum1=W(0,-1110236986,1037427962,1034501898,1016736263)+W(1,1014755782,-1123320716,-1118983748,1016313655)+W(2,-1123890785,-1112145786,1028857234,-1110973538)+W(3,1017396903,1033705562,1025897228,1041641985)+W(4,1042339025,-1089525132,-1132973070,1026292820)+W(5,-1151588920,1038469390,1056478885,-1103961368)+W(6,1052671191,-1108906970,-1130131975,-1144171612)+W(7,1010979982,-1130905399,1002874044,-1092344862);sum2=W(0,1028189234,1040952978,1024414743,1007730851)+W(1,1010322539,-1112421528,-1094377458,-1142484934)+W(2,1057294107,1029625115,1005058566,-1121307593)+W(3,1019759378,-1199698720,1023925523,1024397525)+W(4,981970521,-1111248658,-1133182691,1013915195)+W(5,-1146368902,-1116592821,-1109339192,-1121038101)+W(6,1035588225,-1124411850,1020584890,-1127318198)+W(7,-1118541421,-1140327971,1026110889,-1107404728);WS(1063581112,1015292283);
sum1=W(0,-1112186771,-1098422117,1037634467,-1124445804)+W(1,1010580432,-1127761788,-1106625757,-1117642958)+W(2,1034155462,1004978479,1006823135,1028314614)+W(3,1021285644,1034713459,1029436414,1037373467)+W(4,1036776315,-1083793455,-1125096044,-1123806598)+W(5,-1137018200,1036181095,1058965073,-1102837698)+W(6,1064148787,-1106689849,-1117498166,1046804719)+W(7,994321759,-1119765454,1033810693,-1089226130);sum2=W(0,-1113739078,1041258512,-1122115974,-1129458054)+W(1,-1119046895,1029845331,1041055451,-1115241196)+W(2,1043546644,-1127386873,1015201109,-1121551577)+W(3,1018415015,-1140149017,-1135801459,-1131486243)+W(4,-1134632819,-1118435057,-1110373665,-1127012521)+W(5,-1122814807,1025056413,1025961773,-1106078947)+W(6,-1107711610,1039413537,1021812843,-1121983257)+W(7,-1139476701,-1132245806,-1110385416,1048226293);WS(-1109010880,-1087548956);
sum1=W(0,1019661856,-1091443170,-1102610188,1034343312)+W(1,-1140792121,1024647464,1042942296,1017025648)+W(2,-1105694067,1039271048,1025692706,1039446704)+W(3,-1107855416,1041193844,1041317114,-1103700296)+W(4,1016751552,-1096454908,-1095012676,1034947768)+W(5,1030724160,1019936112,-1131030249,-1126501287)+W(6,1042564604,1038373096,1029737824,1046023882)+W(7,-1141422594,1029263800,1012879825,1044246468);sum2=W(0,1025456143,-1105773446,-1121503695,-1113997103)+W(1,-1099438501,1039219872,-1106040358,-1102403849)+W(2,1059420344,1024971971,-1112744336,1038975878)+W(3,1046943722,-1105420350,-1106873869,1046039582)+W(4,1028771217,-1114143244,-1107522705,1034034732)+W(5,1018212015,-1106459627,-1109746606,1035315492)+W(6,1032873918,-1121564954,1021740679,-1105460279)+W(7,1026290649,-1130313815,-1122379806,1040681265);WS(-1086299832,-1077288694);
sum1=W(0,-1108835908,1055092577,-1108540692,-1132921948)+W(1,-1130194922,-1113503632,-1113759276,965138311)+W(2,1062013047,-1118733319,-1131678690,1021468846)+W(3,991635057,1023538631,1015065790,1022391342)+W(4,-1113901292,-1158126306,-1099039878,1021716686)+W(5,998651320,-1107695832,-1089051407,1023078294)+W(6,-1096197083,1041516082,1039618828,-1111509136)+W(7,-1133490396,997649137,-1122936235,1050708993);sum2=W(0,-1119506980,1054189655,1030599513,1027343155)+W(1,-1140785051,-1120347934,-1112736561,1016526837)+W(2,-1119322812,-1120928356,1016406968,-1108453664)+W(3,-1129452107,-1117792638,988482485,-1119223720)+W(4,-1149877867,1037590422,1035891239,-1133976495)+W(5,994153115,1004824957,1041308688,-1126385541)+W(6,1012747883,-1108226898,-1113698362,-1130801609)+W(7,-1116360142,1018050885,1016225738,-1107379808);WS(-1113279936,1066223903);
sum1=W(0,1044160156,-1100167260,-1140107833,-1141738481)+W(1,-1123239900,1032644739,1035637471,-1129655596)+W(2,-1100730273,1034288823,-1154978689,-1116929726)+W(3,1029624526,-1108229911,-1114187043,1024316286)+W(4,-1138940153,1050703688,1040261344,-1128171420)+W(5,964173357,-1124525100,-1130335589,1020686276)+W(6,-1108200895,-1123177006,-1123695998,-1112013315)+W(7,1014134393,1013984857,-1141423761,1040782300);sum2=W(0,-1080575150,1068148121,1017345212,-1125272644)+W(1,-1129056732,1010161976,1026244022,-1122847678)+W(2,-1113655261,1032085971,-1143902384,1016051020)+W(3,1004223696,-1136984808,-1137376840,-1130782536)+W(4,-1099614716,1047257730,1021458196,-1115606620)+W(5,-1123394906,1017049220,1044966894,-1102155153)+W(6,-1120838650,1020803060,-1131253088,1009639320)+W(7,967940860,-1137115752,1016311348,-1132238288);WS(1060545080,-1126581603);
sum1=W(0,1037448680,1048595306,-1128752350,1037657648)+W(1,1025282125,1043419290,1035187792,1031833596)+W(2,-1094666759,1041691860,1029508223,1032285712)+W(3,-1096441814,1034587656,1040118132,-1092127852)+W(4,1043836232,-1090205186,-1112268976,1032630360)+W(5,1031675647,1034806588,1057651571,976149203)+W(6,1053340438,-1108078856,-1125010622,1045186906)+W(7,-1104761760,1033087420,1042698525,-1082657749);sum2=W(0,-1121651762,1047572688,1026991402,-1126365381)+W(1,-1134045690,-1117034488,-1115886918,-1122087574)+W(2,1038479879,-1145545780,-1168196508,-1118780236)+W(3,-1137057610,1007905050,-1139655050,1011684618)+W(4,-1135914762,1019253181,1034075649,-1123698886)+W(5,-1147908244,1016718341,1035108181,-1118625490)+W(6,1023543366,-1114469118,-1113635181,998149095)+W(7,-1132109957,-1142844852,992781287,-1114677625);WS(-1083899832,-1105526146);
sum1=W(0,-1105573131,1062437883,-1125720471,-1139718894)+W(1,-1132776678,1009731342,1022150135,-1119529939)+W(2,1052836221,-1107292779,-1152407445,-1106102943)+W(3,-1112611206,-1129505495,-1119739267,-1123085499)+W(4,1044187583,-1092285679,-1119744955,1026357515)+W(5,-1125768375,1033366698,1058460257,-1104526300)+W(6,1048719011,-1107209883,-1111407198,-1117075907)+W(7,-1114009838,-1119196243,-1122559055,-1089717563);sum2=W(0,-1123619892,-1135427545,-1117035240,-1129400032)+W(1,-1136239801,-1121250556,-1115955576,1016529300)+W(2,1053020794,-1113498942,-1144812946,999654946)+W(3,998047364,-1135792457,-1146605522,-1135856481)+W(4,-1105612607,1035443403,1025172792,-1110807022)+W(5,-1129444600,-1117326476,-1111010692,-1131262448)+W(6,1039345667,-1120747576,-1123816828,1033543849)+W(7,1022819536,-1119691028,-1113301822,1047843748);WS(-1107513792,1064663354);
sum1=W(0,-1104300038,1046262406,1021510766,-1161118946)+W(1,1011863892,-1128724830,1019068110,-1135077628)+W(2,1034822530,-1108820108,1009770420,-1127591630)+W(3,-1120336759,1036426604,1025488559,1031948820)+W(4,1040244826,-1091621085,-1113532308,1030862455)+W(5,-1135539484,1036941280,1054782000,-1102940181)+W(6,1051734861,-1107582956,-1123071015,1032378968)+W(7,-1172984259,-1126076542,-1125175670,-1095483267);sum2=W(0,1025917606,-1092786651,-1123380440,-1139065871)+W(1,-1127829351,1034470972,1057784826,1013849783)+W(2,-1085937537,-1140169471,-1133276463,1021581075)+W(3,-1137094527,1001568686,-1124883951,-1130048007)+W(4,1026230428,988696695,-1140752647,-1135206239)+W(5,1016077019,1033822297,1049996339,1027050280)+W(6,-1122295168,1029689087,974924014,1022777359)+W(7,1032545188,1011238415,-1135329695,1032573953);WS(1058918200,-1121082995);
return clamp(mstd0 + 5.0 * vsum / wsum * mstd1, 0.0, 1.0);
}  // nnedi3
vec4 hook() {
vec4 ret = vec4(0.0);
vec4 samples[8];
samples[0][0] = HOOKED_texOff(vec2(-1.0, 0.0))[0];
samples[0][1] = HOOKED_texOff(vec2(0.0, 0.0))[0];
samples[0][2] = HOOKED_texOff(vec2(0.0, -1.0))[0];
samples[0][3] = HOOKED_texOff(vec2(-1.0, -1.0))[0];
samples[1][0] = HOOKED_texOff(vec2(-1.0, 2.0))[0];
samples[1][1] = HOOKED_texOff(vec2(0.0, 2.0))[0];
samples[1][2] = HOOKED_texOff(vec2(0.0, 1.0))[0];
samples[1][3] = HOOKED_texOff(vec2(-1.0, 1.0))[0];
samples[2][0] = HOOKED_texOff(vec2(1.0, 0.0))[0];
samples[2][1] = HOOKED_texOff(vec2(2.0, 0.0))[0];
samples[2][2] = HOOKED_texOff(vec2(2.0, -1.0))[0];
samples[2][3] = HOOKED_texOff(vec2(1.0, -1.0))[0];
samples[3][0] = HOOKED_texOff(vec2(1.0, 2.0))[0];
samples[3][1] = HOOKED_texOff(vec2(2.0, 2.0))[0];
samples[3][2] = HOOKED_texOff(vec2(2.0, 1.0))[0];
samples[3][3] = HOOKED_texOff(vec2(1.0, 1.0))[0];
samples[4][0] = nnedi3_int01_texOff(vec2(-1.0, -1.0))[0];
samples[4][1] = nnedi3_int01_texOff(vec2(0.0, -1.0))[0];
samples[4][2] = nnedi3_int01_texOff(vec2(0.0, -2.0))[0];
samples[4][3] = nnedi3_int01_texOff(vec2(-1.0, -2.0))[0];
samples[5][0] = nnedi3_int01_texOff(vec2(-1.0, 1.0))[0];
samples[5][1] = nnedi3_int01_texOff(vec2(0.0, 1.0))[0];
samples[5][2] = nnedi3_int01_texOff(vec2(0.0, 0.0))[0];
samples[5][3] = nnedi3_int01_texOff(vec2(-1.0, 0.0))[0];
samples[6][0] = nnedi3_int01_texOff(vec2(1.0, -1.0))[0];
samples[6][1] = nnedi3_int01_texOff(vec2(2.0, -1.0))[0];
samples[6][2] = nnedi3_int01_texOff(vec2(2.0, -2.0))[0];
samples[6][3] = nnedi3_int01_texOff(vec2(1.0, -2.0))[0];
samples[7][0] = nnedi3_int01_texOff(vec2(1.0, 1.0))[0];
samples[7][1] = nnedi3_int01_texOff(vec2(2.0, 1.0))[0];
samples[7][2] = nnedi3_int01_texOff(vec2(2.0, 0.0))[0];
samples[7][3] = nnedi3_int01_texOff(vec2(1.0, 0.0))[0];
ret[0] = nnedi3(samples);
samples[0][0] = HOOKED_texOff(vec2(-1.0, 0.0))[1];
samples[0][1] = HOOKED_texOff(vec2(0.0, 0.0))[1];
samples[0][2] = HOOKED_texOff(vec2(0.0, -1.0))[1];
samples[0][3] = HOOKED_texOff(vec2(-1.0, -1.0))[1];
samples[1][0] = HOOKED_texOff(vec2(-1.0, 2.0))[1];
samples[1][1] = HOOKED_texOff(vec2(0.0, 2.0))[1];
samples[1][2] = HOOKED_texOff(vec2(0.0, 1.0))[1];
samples[1][3] = HOOKED_texOff(vec2(-1.0, 1.0))[1];
samples[2][0] = HOOKED_texOff(vec2(1.0, 0.0))[1];
samples[2][1] = HOOKED_texOff(vec2(2.0, 0.0))[1];
samples[2][2] = HOOKED_texOff(vec2(2.0, -1.0))[1];
samples[2][3] = HOOKED_texOff(vec2(1.0, -1.0))[1];
samples[3][0] = HOOKED_texOff(vec2(1.0, 2.0))[1];
samples[3][1] = HOOKED_texOff(vec2(2.0, 2.0))[1];
samples[3][2] = HOOKED_texOff(vec2(2.0, 1.0))[1];
samples[3][3] = HOOKED_texOff(vec2(1.0, 1.0))[1];
samples[4][0] = nnedi3_int01_texOff(vec2(-1.0, -1.0))[1];
samples[4][1] = nnedi3_int01_texOff(vec2(0.0, -1.0))[1];
samples[4][2] = nnedi3_int01_texOff(vec2(0.0, -2.0))[1];
samples[4][3] = nnedi3_int01_texOff(vec2(-1.0, -2.0))[1];
samples[5][0] = nnedi3_int01_texOff(vec2(-1.0, 1.0))[1];
samples[5][1] = nnedi3_int01_texOff(vec2(0.0, 1.0))[1];
samples[5][2] = nnedi3_int01_texOff(vec2(0.0, 0.0))[1];
samples[5][3] = nnedi3_int01_texOff(vec2(-1.0, 0.0))[1];
samples[6][0] = nnedi3_int01_texOff(vec2(1.0, -1.0))[1];
samples[6][1] = nnedi3_int01_texOff(vec2(2.0, -1.0))[1];
samples[6][2] = nnedi3_int01_texOff(vec2(2.0, -2.0))[1];
samples[6][3] = nnedi3_int01_texOff(vec2(1.0, -2.0))[1];
samples[7][0] = nnedi3_int01_texOff(vec2(1.0, 1.0))[1];
samples[7][1] = nnedi3_int01_texOff(vec2(2.0, 1.0))[1];
samples[7][2] = nnedi3_int01_texOff(vec2(2.0, 0.0))[1];
samples[7][3] = nnedi3_int01_texOff(vec2(1.0, 0.0))[1];
ret[1] = nnedi3(samples);
samples[0][0] = HOOKED_texOff(vec2(-1.0, 0.0))[2];
samples[0][1] = HOOKED_texOff(vec2(0.0, 0.0))[2];
samples[0][2] = HOOKED_texOff(vec2(0.0, -1.0))[2];
samples[0][3] = HOOKED_texOff(vec2(-1.0, -1.0))[2];
samples[1][0] = HOOKED_texOff(vec2(-1.0, 2.0))[2];
samples[1][1] = HOOKED_texOff(vec2(0.0, 2.0))[2];
samples[1][2] = HOOKED_texOff(vec2(0.0, 1.0))[2];
samples[1][3] = HOOKED_texOff(vec2(-1.0, 1.0))[2];
samples[2][0] = HOOKED_texOff(vec2(1.0, 0.0))[2];
samples[2][1] = HOOKED_texOff(vec2(2.0, 0.0))[2];
samples[2][2] = HOOKED_texOff(vec2(2.0, -1.0))[2];
samples[2][3] = HOOKED_texOff(vec2(1.0, -1.0))[2];
samples[3][0] = HOOKED_texOff(vec2(1.0, 2.0))[2];
samples[3][1] = HOOKED_texOff(vec2(2.0, 2.0))[2];
samples[3][2] = HOOKED_texOff(vec2(2.0, 1.0))[2];
samples[3][3] = HOOKED_texOff(vec2(1.0, 1.0))[2];
samples[4][0] = nnedi3_int01_texOff(vec2(-1.0, -1.0))[2];
samples[4][1] = nnedi3_int01_texOff(vec2(0.0, -1.0))[2];
samples[4][2] = nnedi3_int01_texOff(vec2(0.0, -2.0))[2];
samples[4][3] = nnedi3_int01_texOff(vec2(-1.0, -2.0))[2];
samples[5][0] = nnedi3_int01_texOff(vec2(-1.0, 1.0))[2];
samples[5][1] = nnedi3_int01_texOff(vec2(0.0, 1.0))[2];
samples[5][2] = nnedi3_int01_texOff(vec2(0.0, 0.0))[2];
samples[5][3] = nnedi3_int01_texOff(vec2(-1.0, 0.0))[2];
samples[6][0] = nnedi3_int01_texOff(vec2(1.0, -1.0))[2];
samples[6][1] = nnedi3_int01_texOff(vec2(2.0, -1.0))[2];
samples[6][2] = nnedi3_int01_texOff(vec2(2.0, -2.0))[2];
samples[6][3] = nnedi3_int01_texOff(vec2(1.0, -2.0))[2];
samples[7][0] = nnedi3_int01_texOff(vec2(1.0, 1.0))[2];
samples[7][1] = nnedi3_int01_texOff(vec2(2.0, 1.0))[2];
samples[7][2] = nnedi3_int01_texOff(vec2(2.0, 0.0))[2];
samples[7][3] = nnedi3_int01_texOff(vec2(1.0, 0.0))[2];
ret[2] = nnedi3(samples);
samples[0][0] = HOOKED_texOff(vec2(-1.0, 0.0))[3];
samples[0][1] = HOOKED_texOff(vec2(0.0, 0.0))[3];
samples[0][2] = HOOKED_texOff(vec2(0.0, -1.0))[3];
samples[0][3] = HOOKED_texOff(vec2(-1.0, -1.0))[3];
samples[1][0] = HOOKED_texOff(vec2(-1.0, 2.0))[3];
samples[1][1] = HOOKED_texOff(vec2(0.0, 2.0))[3];
samples[1][2] = HOOKED_texOff(vec2(0.0, 1.0))[3];
samples[1][3] = HOOKED_texOff(vec2(-1.0, 1.0))[3];
samples[2][0] = HOOKED_texOff(vec2(1.0, 0.0))[3];
samples[2][1] = HOOKED_texOff(vec2(2.0, 0.0))[3];
samples[2][2] = HOOKED_texOff(vec2(2.0, -1.0))[3];
samples[2][3] = HOOKED_texOff(vec2(1.0, -1.0))[3];
samples[3][0] = HOOKED_texOff(vec2(1.0, 2.0))[3];
samples[3][1] = HOOKED_texOff(vec2(2.0, 2.0))[3];
samples[3][2] = HOOKED_texOff(vec2(2.0, 1.0))[3];
samples[3][3] = HOOKED_texOff(vec2(1.0, 1.0))[3];
samples[4][0] = nnedi3_int01_texOff(vec2(-1.0, -1.0))[3];
samples[4][1] = nnedi3_int01_texOff(vec2(0.0, -1.0))[3];
samples[4][2] = nnedi3_int01_texOff(vec2(0.0, -2.0))[3];
samples[4][3] = nnedi3_int01_texOff(vec2(-1.0, -2.0))[3];
samples[5][0] = nnedi3_int01_texOff(vec2(-1.0, 1.0))[3];
samples[5][1] = nnedi3_int01_texOff(vec2(0.0, 1.0))[3];
samples[5][2] = nnedi3_int01_texOff(vec2(0.0, 0.0))[3];
samples[5][3] = nnedi3_int01_texOff(vec2(-1.0, 0.0))[3];
samples[6][0] = nnedi3_int01_texOff(vec2(1.0, -1.0))[3];
samples[6][1] = nnedi3_int01_texOff(vec2(2.0, -1.0))[3];
samples[6][2] = nnedi3_int01_texOff(vec2(2.0, -2.0))[3];
samples[6][3] = nnedi3_int01_texOff(vec2(1.0, -2.0))[3];
samples[7][0] = nnedi3_int01_texOff(vec2(1.0, 1.0))[3];
samples[7][1] = nnedi3_int01_texOff(vec2(2.0, 1.0))[3];
samples[7][2] = nnedi3_int01_texOff(vec2(2.0, 0.0))[3];
samples[7][3] = nnedi3_int01_texOff(vec2(1.0, 0.0))[3];
ret[3] = nnedi3(samples);
return ret;
}  // hook
//!DESC NNEDI3 (step=step3, window=8x4, neurons=16)
//!HOOK LUMA
//!HOOK CHROMA
//!HOOK RGB
//!HOOK XYZ
//!BIND HOOKED
//!BIND nnedi3_int01
//!SAVE nnedi3_int11
//!WHEN HOOKED.w 2 * OUTPUT.w / 1.600000 < HOOKED.h 2 * OUTPUT.h / 1.600000 < *
#pragma optionNV(fastprecision on))
float nnedi3(vec4 samples[8]) {
float sum = 0.0, sumsq = 0.0;
for (int i = 0; i < 8; i++) {
    sum += dot(samples[i], vec4(1.0));
    sumsq += dot(samples[i], samples[i]);
}
float mstd0 = sum / 32.0;
float mstd1 = sumsq / 32.0 - mstd0 * mstd0;
float mstd2 = mix(0.0, inversesqrt(mstd1), mstd1 >= 1.192092896e-7);
mstd1 *= mstd2;
float vsum = 0.0, wsum = 0.0, sum1, sum2;
#define T(x) intBitsToFloat(x)
#define W(i,w0,w1,w2,w3) dot(samples[i],vec4(T(w0),T(w1),T(w2),T(w3)))
#define WS(w0,w1) sum1 = exp(sum1 * mstd2 + T(w0)); sum2 = sum2 * mstd2 + T(w1); wsum += sum1; vsum += sum1*(sum2/(1.0+abs(sum2)));
sum1=W(0,1016130204,-1087068557,-1112248839,-1123354974)+W(1,-1122284590,1027638054,1059583965,-1101453425)+W(2,1063313277,-1103342192,-1143613552,1046299686)+W(3,-1124394588,-1111377363,1003350800,-1088182320)+W(4,-1103968288,1048182784,1024662558,-1118620174)+W(5,-1122818124,-1137723992,-1119323982,-1117908518)+W(6,1047279381,-1115088511,-1129268360,1028038478)+W(7,978245507,1028117438,-1134684248,1034186247);sum2=W(0,-1115594515,-1128443230,-1131063526,-1162931039)+W(1,-1156766128,-1125594766,-1107588397,1022791334)+W(2,1042762789,-1107118398,-1117642655,1029801649)+W(3,-1148613464,993928432,-1186206458,1009001220)+W(4,-1119907402,1044675527,-1131086728,-1136248556)+W(5,1014782692,-1135599628,-1111169922,1017500018)+W(6,1050674207,-1113986381,-1128864654,1031011705)+W(7,-1114139175,1007622876,1017255694,-1112569685);WS(1038828992,1041685264);
sum1=W(0,-1117673776,1060640651,1049950910,-1114329248)+W(1,1008781376,-1124000392,-1098159517,1038612842)+W(2,-1085831405,1033402064,1028668144,-1097681183)+W(3,1023707152,1012109856,-1110558370,1053136924)+W(4,1034401008,1045782072,1027336960,995958527)+W(5,1029875310,-1105439902,-1106507532,1035088196)+W(6,-1105157973,-1122828000,1025858258,-1107326552)+W(7,1034119968,-1114749520,-1113173980,1032016120);sum2=W(0,1023637252,-1100127579,-1099468189,1031315360)+W(1,-1124350185,1003450083,1034036134,-1107666272)+W(2,-1117241706,1038018354,1036663822,-1112139926)+W(3,-1131082337,998992195,-1110479054,1027811452)+W(4,-1107869385,1052854494,-1140834082,-1131767489)+W(5,-1110538107,1041131277,1024451620,-1117110288)+W(6,1052996200,-1112496415,-1122285462,1024287080)+W(7,1035032776,-1106762474,-1112615559,1027157968);WS(-1086074680,1053637716);
sum1=W(0,-1136570733,1052460699,1042002951,-1121345387)+W(1,-1158465386,-1121708851,-1124281856,1027081787)+W(2,-1107443934,-1117268427,-1121398619,-1113042450)+W(3,1016359031,1021173351,-1136658365,1043313411)+W(4,1049266593,-1094571489,-1165378922,-1148805338)+W(5,-1120818857,1035650578,1040734807,-1133439181)+W(6,-1098765182,1036113926,991217235,-1115297518)+W(7,1027853163,-1106476275,-1112513138,1006695533);sum2=W(0,1051558711,-1096673587,-1170492850,1026517575)+W(1,1022251878,-1122577241,-1098179385,1049822619)+W(2,-1136175651,-1124275402,-1143472678,-1138816415)+W(3,-1141894102,1009415395,1007812651,-1116986501)+W(4,1071692777,-1077357700,1003954710,1017334370)+W(5,1019995718,1015494226,996694924,1020207734)+W(6,-1098960792,1018703670,998846550,-1132363566)+W(7,-1126828734,-1163222937,1007766851,1003290486);WS(1051521136,1027207116);
sum1=W(0,-1102175837,1057246783,1010830545,-1122694020)+W(1,1008379217,-1117338572,-1089509425,1045518980)+W(2,-1093542759,1041281977,1018062184,-1124291704)+W(3,1001093793,1015898776,1008755233,1055793637)+W(4,-1116351908,1026322980,-1124202632,-1121133108)+W(5,1015772516,1009646833,1025178484,1009393969)+W(6,982577970,-1125394504,-1116091286,1037913146)+W(7,1001810977,-1121163492,-1127575032,-1118947636);sum2=W(0,-1135578111,1013443151,-1135527491,-1137495011)+W(1,-1133405571,-1166794345,-1122100892,1017473747)+W(2,1049128967,-1098008683,-1118108263,1027730022)+W(3,1020545683,-1128178767,-1101482344,1046423571)+W(4,1029346938,-1114797945,-1123650952,1013616911)+W(5,1008139351,-1156685818,-1128721387,1012413655)+W(6,1068130737,-1080443718,-1128775579,1024465134)+W(7,-1126785325,991435034,-1137148015,-1143058109);WS(1057767608,-1132080751);
sum1=W(0,-1117947285,1051769667,1025766741,1026028453)+W(1,1015828970,1028389741,-1120826122,1025261389)+W(2,-1111744027,1030333189,1012106581,1035118319)+W(3,1028257397,1027514349,-1122181545,1049618505)+W(4,1048679017,-1083959172,-1135552917,1026017621)+W(5,1025013027,1039505775,1045191525,1011196341)+W(6,-1084413328,1045191121,-1138611630,1040474693)+W(7,-1123719333,1020294666,1030480605,-1110336171);sum2=W(0,1008167722,-1099714612,-1101123140,1017587161)+W(1,-1148301500,1009340114,1032013714,-1125344655)+W(2,1039093756,1026403646,988296658,1040188371)+W(3,-1115917000,-1139728254,1002132020,-1111525569)+W(4,1005112948,1049070164,-1103020887,1028118553)+W(5,-1138850406,-1167693540,1022049457,1015776789)+W(6,1046164698,1033545355,1010063898,1022642341)+W(7,-1103378287,1035581889,1037334715,-1098832696);WS(-1099372256,-1088618788);
sum1=W(0,-1103996671,1064716592,1048693927,-1112538182)+W(1,-1110537326,-1108087402,-1085173359,1046614908)+W(2,-1086749016,1032699126,-1109099742,-1112344546)+W(3,1034104622,-1120726228,-1130166943,1062252083)+W(4,1024020908,-1143605597,1033711782,-1113349022)+W(5,-1114146165,-1138402062,1004694493,-1111225386)+W(6,1044926535,-1121424940,-1110127398,-1129092599)+W(7,1042110371,-1106064827,-1106709441,1040479887);sum2=W(0,-1120467381,-1139561796,1013472954,987083788)+W(1,-1152635694,-1155962630,1038343490,-1118651341)+W(2,1038342084,-1115615181,979955865,-1120418118)+W(3,-1132569906,-1135582470,-1123141745,-1118476220)+W(4,-1121977305,1044091298,-1131186779,-1144106823)+W(5,964510307,-1117365756,-1115306287,-1162389292)+W(6,1042996066,-1127292875,-1163904780,-1122269098)+W(7,-1141833923,1008840046,1014320394,-1128689408);WS(1041282784,1044242623);
sum1=W(0,-1100880653,1057266723,-1171512555,-1119885764)+W(1,1005085853,-1115226950,-1089952515,1046531310)+W(2,-1094412795,1043843337,1025494836,1003864029)+W(3,1015234855,1003362397,-1156936827,1056310444)+W(4,-1113812594,1010135439,-1121861252,-1119816052)+W(5,1021011107,1003139037,1031135156,1015358999)+W(6,-1118004569,-1125989575,-1113504879,1040963149)+W(7,992693307,-1120612644,-1122714492,-1114099002);sum2=W(0,1019060164,-1114788024,-1142619324,1005317381)+W(1,1012779564,-1139793504,-1120377499,1014092605)+W(2,-1094218173,1054132458,1026462555,-1126266146)+W(3,-1130333980,1015734963,1048935725,-1099532818)+W(4,1009279342,-1098688460,1012902153,-1143827754)+W(5,-1137528453,-1147729078,1017453102,-1131000233)+W(6,-1078812823,1070492026,1020893616,-1128784654)+W(7,1018177647,987943782,1011358224,1007638067);WS(1046635232,1024078131);
sum1=W(0,1017042555,1044122447,1035063871,1002735212)+W(1,1021596219,-1107502027,-1092481954,1031803657)+W(2,-1094991056,1038536855,1040314319,-1097977761)+W(3,1031346589,1021345835,1003107468,1050188814)+W(4,-1132524982,-1110416695,1034039879,1025138813)+W(5,1015508823,-1103391009,-1094320024,1033606155)+W(6,1051547730,-1114843703,1035664624,-1105608655)+W(7,1046101811,-1136683190,1019470987,1047410847);sum2=W(0,-1116645717,-1111398905,1044036812,-1096475926)+W(1,-1117017643,-1138574198,1026411348,-1113263240)+W(2,1051331710,-1130292776,-1106234474,1052862983)+W(3,1037890580,-1109714921,-1111704128,1042458641)+W(4,1041647377,-1096068583,-1112231286,-1112281069)+W(5,1039764966,-1104710548,-1114320784,1023473494)+W(6,1038036111,1037359643,-1121785528,1024115789)+W(7,-1106844581,1041123403,-1123406807,1028002558);WS(-1088554040,-1076674880);
sum1=W(0,1042339025,-1089525132,-1132973070,1026292820)+W(1,-1151588920,1038469390,1056478885,-1103961368)+W(2,1052671191,-1108906970,-1130131975,-1144171612)+W(3,1010979982,-1130905399,1002874044,-1092344862)+W(4,-1110236986,1037427962,1034501898,1016736263)+W(5,1014755782,-1123320716,-1118983748,1016313655)+W(6,-1123890785,-1112145786,1028857234,-1110973538)+W(7,1017396903,1033705562,1025897228,1041641985);sum2=W(0,981970521,-1111248658,-1133182691,1013915195)+W(1,-1146368902,-1116592821,-1109339192,-1121038101)+W(2,1035588225,-1124411850,1020584890,-1127318198)+W(3,-1118541421,-1140327971,1026110889,-1107404728)+W(4,1028189234,1040952978,1024414743,1007730851)+W(5,1010322539,-1112421528,-1094377458,-1142484934)+W(6,1057294107,1029625115,1005058566,-1121307593)+W(7,1019759378,-1199698720,1023925523,1024397525);WS(1063581112,1015292283);
sum1=W(0,1036776315,-1083793455,-1125096044,-1123806598)+W(1,-1137018200,1036181095,1058965073,-1102837698)+W(2,1064148787,-1106689849,-1117498166,1046804719)+W(3,994321759,-1119765454,1033810693,-1089226130)+W(4,-1112186771,-1098422117,1037634467,-1124445804)+W(5,1010580432,-1127761788,-1106625757,-1117642958)+W(6,1034155462,1004978479,1006823135,1028314614)+W(7,1021285644,1034713459,1029436414,1037373467);sum2=W(0,-1134632819,-1118435057,-1110373665,-1127012521)+W(1,-1122814807,1025056413,1025961773,-1106078947)+W(2,-1107711610,1039413537,1021812843,-1121983257)+W(3,-1139476701,-1132245806,-1110385416,1048226293)+W(4,-1113739078,1041258512,-1122115974,-1129458054)+W(5,-1119046895,1029845331,1041055451,-1115241196)+W(6,1043546644,-1127386873,1015201109,-1121551577)+W(7,1018415015,-1140149017,-1135801459,-1131486243);WS(-1109010880,-1087548956);
sum1=W(0,1016751552,-1096454908,-1095012676,1034947768)+W(1,1030724160,1019936112,-1131030249,-1126501287)+W(2,1042564604,1038373096,1029737824,1046023882)+W(3,-1141422594,1029263800,1012879825,1044246468)+W(4,1019661856,-1091443170,-1102610188,1034343312)+W(5,-1140792121,1024647464,1042942296,1017025648)+W(6,-1105694067,1039271048,1025692706,1039446704)+W(7,-1107855416,1041193844,1041317114,-1103700296);sum2=W(0,1028771217,-1114143244,-1107522705,1034034732)+W(1,1018212015,-1106459627,-1109746606,1035315492)+W(2,1032873918,-1121564954,1021740679,-1105460279)+W(3,1026290649,-1130313815,-1122379806,1040681265)+W(4,1025456143,-1105773446,-1121503695,-1113997103)+W(5,-1099438501,1039219872,-1106040358,-1102403849)+W(6,1059420344,1024971971,-1112744336,1038975878)+W(7,1046943722,-1105420350,-1106873869,1046039582);WS(-1086299832,-1077288694);
sum1=W(0,-1113901292,-1158126306,-1099039878,1021716686)+W(1,998651320,-1107695832,-1089051407,1023078294)+W(2,-1096197083,1041516082,1039618828,-1111509136)+W(3,-1133490396,997649137,-1122936235,1050708993)+W(4,-1108835908,1055092577,-1108540692,-1132921948)+W(5,-1130194922,-1113503632,-1113759276,965138311)+W(6,1062013047,-1118733319,-1131678690,1021468846)+W(7,991635057,1023538631,1015065790,1022391342);sum2=W(0,-1149877867,1037590422,1035891239,-1133976495)+W(1,994153115,1004824957,1041308688,-1126385541)+W(2,1012747883,-1108226898,-1113698362,-1130801609)+W(3,-1116360142,1018050885,1016225738,-1107379808)+W(4,-1119506980,1054189655,1030599513,1027343155)+W(5,-1140785051,-1120347934,-1112736561,1016526837)+W(6,-1119322812,-1120928356,1016406968,-1108453664)+W(7,-1129452107,-1117792638,988482485,-1119223720);WS(-1113279936,1066223903);
sum1=W(0,-1138940153,1050703688,1040261344,-1128171420)+W(1,964173357,-1124525100,-1130335589,1020686276)+W(2,-1108200895,-1123177006,-1123695998,-1112013315)+W(3,1014134393,1013984857,-1141423761,1040782300)+W(4,1044160156,-1100167260,-1140107833,-1141738481)+W(5,-1123239900,1032644739,1035637471,-1129655596)+W(6,-1100730273,1034288823,-1154978689,-1116929726)+W(7,1029624526,-1108229911,-1114187043,1024316286);sum2=W(0,-1099614716,1047257730,1021458196,-1115606620)+W(1,-1123394906,1017049220,1044966894,-1102155153)+W(2,-1120838650,1020803060,-1131253088,1009639320)+W(3,967940860,-1137115752,1016311348,-1132238288)+W(4,-1080575150,1068148121,1017345212,-1125272644)+W(5,-1129056732,1010161976,1026244022,-1122847678)+W(6,-1113655261,1032085971,-1143902384,1016051020)+W(7,1004223696,-1136984808,-1137376840,-1130782536);WS(1060545080,-1126581603);
sum1=W(0,1043836232,-1090205186,-1112268976,1032630360)+W(1,1031675647,1034806588,1057651571,976149203)+W(2,1053340438,-1108078856,-1125010622,1045186906)+W(3,-1104761760,1033087420,1042698525,-1082657749)+W(4,1037448680,1048595306,-1128752350,1037657648)+W(5,1025282125,1043419290,1035187792,1031833596)+W(6,-1094666759,1041691860,1029508223,1032285712)+W(7,-1096441814,1034587656,1040118132,-1092127852);sum2=W(0,-1135914762,1019253181,1034075649,-1123698886)+W(1,-1147908244,1016718341,1035108181,-1118625490)+W(2,1023543366,-1114469118,-1113635181,998149095)+W(3,-1132109957,-1142844852,992781287,-1114677625)+W(4,-1121651762,1047572688,1026991402,-1126365381)+W(5,-1134045690,-1117034488,-1115886918,-1122087574)+W(6,1038479879,-1145545780,-1168196508,-1118780236)+W(7,-1137057610,1007905050,-1139655050,1011684618);WS(-1083899832,-1105526146);
sum1=W(0,1044187583,-1092285679,-1119744955,1026357515)+W(1,-1125768375,1033366698,1058460257,-1104526300)+W(2,1048719011,-1107209883,-1111407198,-1117075907)+W(3,-1114009838,-1119196243,-1122559055,-1089717563)+W(4,-1105573131,1062437883,-1125720471,-1139718894)+W(5,-1132776678,1009731342,1022150135,-1119529939)+W(6,1052836221,-1107292779,-1152407445,-1106102943)+W(7,-1112611206,-1129505495,-1119739267,-1123085499);sum2=W(0,-1105612607,1035443403,1025172792,-1110807022)+W(1,-1129444600,-1117326476,-1111010692,-1131262448)+W(2,1039345667,-1120747576,-1123816828,1033543849)+W(3,1022819536,-1119691028,-1113301822,1047843748)+W(4,-1123619892,-1135427545,-1117035240,-1129400032)+W(5,-1136239801,-1121250556,-1115955576,1016529300)+W(6,1053020794,-1113498942,-1144812946,999654946)+W(7,998047364,-1135792457,-1146605522,-1135856481);WS(-1107513792,1064663354);
sum1=W(0,1040244826,-1091621085,-1113532308,1030862455)+W(1,-1135539484,1036941280,1054782000,-1102940181)+W(2,1051734861,-1107582956,-1123071015,1032378968)+W(3,-1172984259,-1126076542,-1125175670,-1095483267)+W(4,-1104300038,1046262406,1021510766,-1161118946)+W(5,1011863892,-1128724830,1019068110,-1135077628)+W(6,1034822530,-1108820108,1009770420,-1127591630)+W(7,-1120336759,1036426604,1025488559,1031948820);sum2=W(0,1026230428,988696695,-1140752647,-1135206239)+W(1,1016077019,1033822297,1049996339,1027050280)+W(2,-1122295168,1029689087,974924014,1022777359)+W(3,1032545188,1011238415,-1135329695,1032573953)+W(4,1025917606,-1092786651,-1123380440,-1139065871)+W(5,-1127829351,1034470972,1057784826,1013849783)+W(6,-1085937537,-1140169471,-1133276463,1021581075)+W(7,-1137094527,1001568686,-1124883951,-1130048007);WS(1058918200,-1121082995);
return clamp(mstd0 + 5.0 * vsum / wsum * mstd1, 0.0, 1.0);
}  // nnedi3
vec4 hook() {
vec4 ret = vec4(0.0);
vec4 samples[8];
samples[0][0] = HOOKED_texOff(vec2(-1.0, 0.0))[0];
samples[0][1] = HOOKED_texOff(vec2(0.0, 0.0))[0];
samples[0][2] = HOOKED_texOff(vec2(0.0, -1.0))[0];
samples[0][3] = HOOKED_texOff(vec2(-1.0, -1.0))[0];
samples[1][0] = HOOKED_texOff(vec2(-1.0, 2.0))[0];
samples[1][1] = HOOKED_texOff(vec2(0.0, 2.0))[0];
samples[1][2] = HOOKED_texOff(vec2(0.0, 1.0))[0];
samples[1][3] = HOOKED_texOff(vec2(-1.0, 1.0))[0];
samples[2][0] = HOOKED_texOff(vec2(1.0, 0.0))[0];
samples[2][1] = HOOKED_texOff(vec2(2.0, 0.0))[0];
samples[2][2] = HOOKED_texOff(vec2(2.0, -1.0))[0];
samples[2][3] = HOOKED_texOff(vec2(1.0, -1.0))[0];
samples[3][0] = HOOKED_texOff(vec2(1.0, 2.0))[0];
samples[3][1] = HOOKED_texOff(vec2(2.0, 2.0))[0];
samples[3][2] = HOOKED_texOff(vec2(2.0, 1.0))[0];
samples[3][3] = HOOKED_texOff(vec2(1.0, 1.0))[0];
samples[4][0] = nnedi3_int01_texOff(vec2(-1.0, 0.0))[0];
samples[4][1] = nnedi3_int01_texOff(vec2(0.0, 0.0))[0];
samples[4][2] = nnedi3_int01_texOff(vec2(0.0, -1.0))[0];
samples[4][3] = nnedi3_int01_texOff(vec2(-1.0, -1.0))[0];
samples[5][0] = nnedi3_int01_texOff(vec2(-1.0, 2.0))[0];
samples[5][1] = nnedi3_int01_texOff(vec2(0.0, 2.0))[0];
samples[5][2] = nnedi3_int01_texOff(vec2(0.0, 1.0))[0];
samples[5][3] = nnedi3_int01_texOff(vec2(-1.0, 1.0))[0];
samples[6][0] = nnedi3_int01_texOff(vec2(1.0, 0.0))[0];
samples[6][1] = nnedi3_int01_texOff(vec2(2.0, 0.0))[0];
samples[6][2] = nnedi3_int01_texOff(vec2(2.0, -1.0))[0];
samples[6][3] = nnedi3_int01_texOff(vec2(1.0, -1.0))[0];
samples[7][0] = nnedi3_int01_texOff(vec2(1.0, 2.0))[0];
samples[7][1] = nnedi3_int01_texOff(vec2(2.0, 2.0))[0];
samples[7][2] = nnedi3_int01_texOff(vec2(2.0, 1.0))[0];
samples[7][3] = nnedi3_int01_texOff(vec2(1.0, 1.0))[0];
ret[0] = nnedi3(samples);
samples[0][0] = HOOKED_texOff(vec2(-1.0, 0.0))[1];
samples[0][1] = HOOKED_texOff(vec2(0.0, 0.0))[1];
samples[0][2] = HOOKED_texOff(vec2(0.0, -1.0))[1];
samples[0][3] = HOOKED_texOff(vec2(-1.0, -1.0))[1];
samples[1][0] = HOOKED_texOff(vec2(-1.0, 2.0))[1];
samples[1][1] = HOOKED_texOff(vec2(0.0, 2.0))[1];
samples[1][2] = HOOKED_texOff(vec2(0.0, 1.0))[1];
samples[1][3] = HOOKED_texOff(vec2(-1.0, 1.0))[1];
samples[2][0] = HOOKED_texOff(vec2(1.0, 0.0))[1];
samples[2][1] = HOOKED_texOff(vec2(2.0, 0.0))[1];
samples[2][2] = HOOKED_texOff(vec2(2.0, -1.0))[1];
samples[2][3] = HOOKED_texOff(vec2(1.0, -1.0))[1];
samples[3][0] = HOOKED_texOff(vec2(1.0, 2.0))[1];
samples[3][1] = HOOKED_texOff(vec2(2.0, 2.0))[1];
samples[3][2] = HOOKED_texOff(vec2(2.0, 1.0))[1];
samples[3][3] = HOOKED_texOff(vec2(1.0, 1.0))[1];
samples[4][0] = nnedi3_int01_texOff(vec2(-1.0, 0.0))[1];
samples[4][1] = nnedi3_int01_texOff(vec2(0.0, 0.0))[1];
samples[4][2] = nnedi3_int01_texOff(vec2(0.0, -1.0))[1];
samples[4][3] = nnedi3_int01_texOff(vec2(-1.0, -1.0))[1];
samples[5][0] = nnedi3_int01_texOff(vec2(-1.0, 2.0))[1];
samples[5][1] = nnedi3_int01_texOff(vec2(0.0, 2.0))[1];
samples[5][2] = nnedi3_int01_texOff(vec2(0.0, 1.0))[1];
samples[5][3] = nnedi3_int01_texOff(vec2(-1.0, 1.0))[1];
samples[6][0] = nnedi3_int01_texOff(vec2(1.0, 0.0))[1];
samples[6][1] = nnedi3_int01_texOff(vec2(2.0, 0.0))[1];
samples[6][2] = nnedi3_int01_texOff(vec2(2.0, -1.0))[1];
samples[6][3] = nnedi3_int01_texOff(vec2(1.0, -1.0))[1];
samples[7][0] = nnedi3_int01_texOff(vec2(1.0, 2.0))[1];
samples[7][1] = nnedi3_int01_texOff(vec2(2.0, 2.0))[1];
samples[7][2] = nnedi3_int01_texOff(vec2(2.0, 1.0))[1];
samples[7][3] = nnedi3_int01_texOff(vec2(1.0, 1.0))[1];
ret[1] = nnedi3(samples);
samples[0][0] = HOOKED_texOff(vec2(-1.0, 0.0))[2];
samples[0][1] = HOOKED_texOff(vec2(0.0, 0.0))[2];
samples[0][2] = HOOKED_texOff(vec2(0.0, -1.0))[2];
samples[0][3] = HOOKED_texOff(vec2(-1.0, -1.0))[2];
samples[1][0] = HOOKED_texOff(vec2(-1.0, 2.0))[2];
samples[1][1] = HOOKED_texOff(vec2(0.0, 2.0))[2];
samples[1][2] = HOOKED_texOff(vec2(0.0, 1.0))[2];
samples[1][3] = HOOKED_texOff(vec2(-1.0, 1.0))[2];
samples[2][0] = HOOKED_texOff(vec2(1.0, 0.0))[2];
samples[2][1] = HOOKED_texOff(vec2(2.0, 0.0))[2];
samples[2][2] = HOOKED_texOff(vec2(2.0, -1.0))[2];
samples[2][3] = HOOKED_texOff(vec2(1.0, -1.0))[2];
samples[3][0] = HOOKED_texOff(vec2(1.0, 2.0))[2];
samples[3][1] = HOOKED_texOff(vec2(2.0, 2.0))[2];
samples[3][2] = HOOKED_texOff(vec2(2.0, 1.0))[2];
samples[3][3] = HOOKED_texOff(vec2(1.0, 1.0))[2];
samples[4][0] = nnedi3_int01_texOff(vec2(-1.0, 0.0))[2];
samples[4][1] = nnedi3_int01_texOff(vec2(0.0, 0.0))[2];
samples[4][2] = nnedi3_int01_texOff(vec2(0.0, -1.0))[2];
samples[4][3] = nnedi3_int01_texOff(vec2(-1.0, -1.0))[2];
samples[5][0] = nnedi3_int01_texOff(vec2(-1.0, 2.0))[2];
samples[5][1] = nnedi3_int01_texOff(vec2(0.0, 2.0))[2];
samples[5][2] = nnedi3_int01_texOff(vec2(0.0, 1.0))[2];
samples[5][3] = nnedi3_int01_texOff(vec2(-1.0, 1.0))[2];
samples[6][0] = nnedi3_int01_texOff(vec2(1.0, 0.0))[2];
samples[6][1] = nnedi3_int01_texOff(vec2(2.0, 0.0))[2];
samples[6][2] = nnedi3_int01_texOff(vec2(2.0, -1.0))[2];
samples[6][3] = nnedi3_int01_texOff(vec2(1.0, -1.0))[2];
samples[7][0] = nnedi3_int01_texOff(vec2(1.0, 2.0))[2];
samples[7][1] = nnedi3_int01_texOff(vec2(2.0, 2.0))[2];
samples[7][2] = nnedi3_int01_texOff(vec2(2.0, 1.0))[2];
samples[7][3] = nnedi3_int01_texOff(vec2(1.0, 1.0))[2];
ret[2] = nnedi3(samples);
samples[0][0] = HOOKED_texOff(vec2(-1.0, 0.0))[3];
samples[0][1] = HOOKED_texOff(vec2(0.0, 0.0))[3];
samples[0][2] = HOOKED_texOff(vec2(0.0, -1.0))[3];
samples[0][3] = HOOKED_texOff(vec2(-1.0, -1.0))[3];
samples[1][0] = HOOKED_texOff(vec2(-1.0, 2.0))[3];
samples[1][1] = HOOKED_texOff(vec2(0.0, 2.0))[3];
samples[1][2] = HOOKED_texOff(vec2(0.0, 1.0))[3];
samples[1][3] = HOOKED_texOff(vec2(-1.0, 1.0))[3];
samples[2][0] = HOOKED_texOff(vec2(1.0, 0.0))[3];
samples[2][1] = HOOKED_texOff(vec2(2.0, 0.0))[3];
samples[2][2] = HOOKED_texOff(vec2(2.0, -1.0))[3];
samples[2][3] = HOOKED_texOff(vec2(1.0, -1.0))[3];
samples[3][0] = HOOKED_texOff(vec2(1.0, 2.0))[3];
samples[3][1] = HOOKED_texOff(vec2(2.0, 2.0))[3];
samples[3][2] = HOOKED_texOff(vec2(2.0, 1.0))[3];
samples[3][3] = HOOKED_texOff(vec2(1.0, 1.0))[3];
samples[4][0] = nnedi3_int01_texOff(vec2(-1.0, 0.0))[3];
samples[4][1] = nnedi3_int01_texOff(vec2(0.0, 0.0))[3];
samples[4][2] = nnedi3_int01_texOff(vec2(0.0, -1.0))[3];
samples[4][3] = nnedi3_int01_texOff(vec2(-1.0, -1.0))[3];
samples[5][0] = nnedi3_int01_texOff(vec2(-1.0, 2.0))[3];
samples[5][1] = nnedi3_int01_texOff(vec2(0.0, 2.0))[3];
samples[5][2] = nnedi3_int01_texOff(vec2(0.0, 1.0))[3];
samples[5][3] = nnedi3_int01_texOff(vec2(-1.0, 1.0))[3];
samples[6][0] = nnedi3_int01_texOff(vec2(1.0, 0.0))[3];
samples[6][1] = nnedi3_int01_texOff(vec2(2.0, 0.0))[3];
samples[6][2] = nnedi3_int01_texOff(vec2(2.0, -1.0))[3];
samples[6][3] = nnedi3_int01_texOff(vec2(1.0, -1.0))[3];
samples[7][0] = nnedi3_int01_texOff(vec2(1.0, 2.0))[3];
samples[7][1] = nnedi3_int01_texOff(vec2(2.0, 2.0))[3];
samples[7][2] = nnedi3_int01_texOff(vec2(2.0, 1.0))[3];
samples[7][3] = nnedi3_int01_texOff(vec2(1.0, 1.0))[3];
ret[3] = nnedi3(samples);
return ret;
}  // hook
//!DESC NNEDI3 (step=step4, window=8x4, neurons=16)
//!HOOK LUMA
//!HOOK CHROMA
//!HOOK RGB
//!HOOK XYZ
//!BIND HOOKED
//!BIND nnedi3_int01
//!BIND nnedi3_int10
//!BIND nnedi3_int11
//!WIDTH 2 HOOKED.w *
//!HEIGHT 2 HOOKED.h *
//!OFFSET -0.500000 -0.500000
//!WHEN HOOKED.w 2 * OUTPUT.w / 1.600000 < HOOKED.h 2 * OUTPUT.h / 1.600000 < *
#pragma optionNV(fastprecision on))
vec4 hook() {
    vec2 dir = fract(HOOKED_pos * HOOKED_size) - 0.5;
    if (dir.x < 0) {
        if (dir.y < 0)
            return HOOKED_texOff(-dir);
        return nnedi3_int01_texOff(-dir);
    } else {
        if (dir.y < 0)
            return nnedi3_int10_texOff(-dir);
        return nnedi3_int11_texOff(-dir);
    }
}
